.586
.code

@set_odd_parity	macro	pOffs
	movzx	edx, byte ptr [eax + pOffs]
	movzx	edx, byte ptr [edx + ParityTable]
	mov	byte ptr [eax + pOffs], dl
ENDM

des_set_odd_parity:
	mov	eax, [esp + 4]
	@set_odd_parity	0
	@set_odd_parity	1
	@set_odd_parity	2
	@set_odd_parity	3
	@set_odd_parity	4
	@set_odd_parity	5
	@set_odd_parity	6
	@set_odd_parity	7
	retn	04

.data

ParityTable	db	001,001,002,002,004,004,007,007,008,008,011,011,013,013,014,014
 		db	016,016,019,019,021,021,022,022,025,025,026,026,028,028,031,031
 		db	032,032,035,035,037,037,038,038,041,041,042,042,044,044,047,047
 		db	049,049,050,050,052,052,055,055,056,056,059,059,061,061,062,062
 		db	064,064,067,067,069,069,070,070,073,073,074,074,076,076,079,079
 		db	081,081,082,082,084,084,087,087,088,088,091,091,093,093,094,094
 		db	097,097,098,098,100,100,103,103,104,104,107,107,109,109,110,110
		db	112,112,115,115,117,117,118,118,121,121,122,122,124,124,127,127
		db	128,128,131,131,133,133,134,134,137,137,138,138,140,140,143,143
		db	145,145,146,146,148,148,151,151,152,152,155,155,157,157,158,158
		db	161,161,162,162,164,164,167,167,168,168,171,171,173,173,174,174
		db	176,176,179,179,181,181,182,182,185,185,186,186,188,188,191,191
		db	193,193,194,194,196,196,199,199,200,200,203,203,205,205,206,206
		db	208,208,211,211,213,213,214,214,217,217,218,218,220,220,223,223
		db	224,224,227,227,229,229,230,230,233,233,234,234,236,236,239,239
		db	241,241,242,242,244,244,247,247,248,248,251,251,253,253,254,254
