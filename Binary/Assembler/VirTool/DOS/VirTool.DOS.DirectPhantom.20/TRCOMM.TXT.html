<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>TRCOMM.TXT</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc0">
  MOV─переслать регистр в регистр/память
 ┌────────────────┬────────────────┐
 │1 0 0 0 1 0 d w │mod reg reg/mem │
 └────────────────┴────────────────┘

  НОП в регистр/память
 ┌────────────────┬────────────────┐
 │1 1 0 0 0 1 1 w │mod 000 reg/mem │
 └────────────────┴────────────────┘

  НОП в регистр
 ┌────────────────┐
 │1 0 1 1 w  reg  │ + Immediate 8/16 bit      
 └────────────────┘

  память в аккумулятор
  (short form)
 ┌────────────────┐
 │1 0 1 0 0 0 d w │ + Immediate 8/16 bit
 └────────────────┘

  регистр/память в сегментный регистр
 ┌────────────────┬──────────────┐
 │1 0 0 0 1 1 d 0 │mod 0 sreg r/m│
 └────────────────┴──────────────┘


  PUSH/POP регистра
 ┌────────────────┐
 │0 1 0 1 x  reg  │   x=0 - PUSH , x=1 - POP
 └────────────────┘

  PUSH сегментного регистра ES, CS, SS или DS
 ┌────────────────┐
 │0 0 0 sreg 1 1 0│
 └────────────────┘

  PUSHF/POPF flags
 ┌────────────────┐
 │1 0 0 1 1 1 0 x │   x=0 - PUSH , x=1 - POP
 └────────────────┘


 XCHG - обмен

  TEST/XCHG регистра/памяти с регистром
 ┌────────────────┬────────────────┐
 │1 0 0 0 0 1 x w │mod reg reg/mem │   x=0 - TEST , x=1 - XCHG
 └────────────────┴────────────────┘

  регистр с аккумулятором
  (short form)
 ┌────────────────┐
 │1 0 0 1 0  reg  │     
 └────────────────┘


  Ввод/вывод через аккумулятор
 ┌────────────────┐
 │1 1 1 0 x 1 y w │ + [Immediate 8] - номер порта
 └────────────────┘
  xy = 00 - IN ввод с фиксированным портом
  xy = 01 - OUT вывод с фиксированным портом
  xy = 10 - IN ввод с виртуальным портом адресуемым DL/DX
  xy = 11 - OUT вывод с виртуальным портом адресуемым DL/DX


  LEA─загрузка в регистр исполнительного адреса
 ┌────────────────┬────────────────┐
 │1 0 0 0 1 1 0 1 │mod reg reg/mem │
 └────────────────┴────────────────┘


  Сброс и установка флагов CF,IF,DF во Flags
 ┌────────────────┐
 │1 1 1 1 1 x x x │   xxx = 000 - CLC - сбросить CF
 └────────────────┘     001 - STC - установить CF
                010 - CLI - сбросить IF
                011 - STI - установить IF
                100 - CLD - сбросить DF
                101 - STD - установить DF

  CMC ─ инверсия CF
 ┌────────────────┐
 │1 1 1 1 0 1 0 1 │
 └────────────────┘

  LAHF─загрузить в AH регистр флагов
  SAHF─сохранить в регистре флагов AH
 ┌────────────────┐
 │1 0 0 1 1 1 1 x │   x=0 - SAHF , x=1 - LAHF
 └────────────────┘


  Арифметические и логические команды

  регистр с регистром/памятью         xxx = 000 - add
 ┌────────────────┬────────────────┐        001 - or
 │0 0 x x x 0 d w │mod reg reg/mem │        010 - adc
 └────────────────┴────────────────┘        011 - sbb
                        100 - and
                        101 - sub
                        110 - xor
                        111 - cmp
  НОП с регистром/памятью
 ┌────────────────┬────────────────┐
 │1 0 0 0 0 0 s w │mod xxx reg/mem │ + Immediate 8/16
 └────────────────┴────────────────┘

  НОП с аккумулятором (short form)
 ┌────────────────┐
 │0 0 x x x 1 0 w │
 └────────────────┘


  TEST ─ проверка разрядов

  TEST/XCHG регистра/памяти и регистра
 ┌────────────────┬────────────────┐
 │1 0 0 0 0 1 x w │mod reg reg/mem │   x=0 - TEST , x=1 - XCHG
 └────────────────┴────────────────┘

 TEST регистра/памяти и НОПа
 ┌────────────────┬────────────────┐
 │1 1 1 1 0 1 1 w │mod 000 reg/mem │ + Immediate 8/16
 └────────────────┴────────────────┘

 TEST аккумулятора и НОПа
 ┌────────────────┐
 │1 0 1 0 1 0 0 w │ + Immediate 8/16          
 └────────────────┘


  INC/DEC регистра/памяти
 ┌────────────────┬────────────────┐
 │1 1 1 1 1 1 1 w │mod 00x reg/mem │  x=0 - INC , x=1 - DEC
 └────────────────┴────────────────┘

  INC/DEC регистра
 ┌────────────────┐
 │0 1 0 0 x  reg  │     
 └────────────────┘


  NEG ─ замена знака в регистре/памяти
 ┌────────────────┬────────────────┐
 │1 1 1 1 0 1 1 w │mod 011 reg/mem │
 └────────────────┴────────────────┘

  NOT ─ инверсия регистра/памяти
 ┌────────────────┬────────────────┐
 │1 1 1 1 0 1 1 w │mod 010 reg/mem │
 └────────────────┴────────────────┘


  Умножение/деление аккумулятора на регистр/память
 ┌────────────────┬────────────────┐
 │1 1 1 1 0 1 1 w │mod 10x reg/mem │   x = 0 - MUL  - беззнаковое
 └────────────────┴────────────────┘       1 - IMUL - знаковое



  Сдвиг регистра/памяти
 ┌────────────────┬────────────────┐
 │1 1 0 x 0 0 y w │mod zzz reg/mem │ + [Immediate 8bit]
 └────────────────┴────────────────┘

  xy = 00 - сдвиг на Imm8         zzz = 000 - ROL
       01 - не используется         001 - ROR
       10 - сдвиг на один разряд        010 - RCL
       11 - сдвиг на Imm8 через CL      011 - RCR
                        100 - SHL/SAL
                        101 - SHR
                        110 - SAL - (UnDocumented)
                        111 - SAR

 ┌────────────────┐
 │0 0 1 x x 1 1 1 │  xx = 00 - DAA - десятичная после сложения
 └────────────────┘   01 - DAS - десятичная после вычитания
              10 - AAA - после сложения
              11 - AAS - после вычитания

 ┌────────────────┬────────────────┐
 │1 1 0 1 0 1 0 x │0 0 0 0 1 0 1 0 │
 └────────────────┴────────────────┘
  x=0 - AAM - коррекция после умножения
  x=1 - AAD - коррекция перед делением

  CBW/CWD ─ расширение
 ┌────────────────┐
 │1 0 0 1 1 0 0 0 │
 └────────────────┘
  x=0 - CBW - байта в слово
  x=1 - CWD - слова в двойное слово


  XLAT ─ табличное преобразвание
 ┌────────────────┐
 │1 1 0 1 0 1 1 1 │
 └────────────────┘

  INT 3
 ┌────────────────┐
 │1 1 0 0 1 1 0 0 │
 └────────────────┘

  NOP/XCHG AX,AX - нет операции
 ┌────────────────┐
 │1 0 0 1 0 0 0 0 │
 └────────────────┘


  Префикс заменяющего сегмента    xx = 00 - ES
 ┌────────────────┐            01 - CS
 │0 0 1 x x 1 1 0 │            10 - SS
 └────────────────┘            11 - DS

                              xxxx = 0000 - o
  Jxx - Условный короткий переход                0001 - no
 ┌────────────────┐                      0010 - c
 │0 1 1 1 x x x x │ + Immediate 8 bit - Rel8             0011 - nc
 └────────────────┘                      0100 - z
                                 0101 - nz
  Jxx - Условный близкий переход                 0110 - be
 ┌────────────────┬────────────────┐                 0111 - a
 │0 0 0 0 1 1 1 1 │1 0 0 0 x x x x │ + Immediate 16 bit      1000 - s
 └────────────────┴────────────────┘                 1001 - ns
                                 1010 - p
                                 1011 - np
                                 1100 - l
                                 1101 - ge
                                 1110 - le
                                 1111 - g



 ────────────────────────────────────────────────────────────────────────────

    Поля в байтах КОП и ModeR/M при 16 битной адресации
    ───────────────────────────────────────────────────

 Wbit - определяет размер операнда
 W=0  - байт
 W=1  - полный размер (16 или 32 бита)

 Dbit - направление передачи данных
 D=0  - регистр в REG/MEM
 D=1  - REG/MEM в регистр

 Sbit - расширение непосредственных данных
 S=0  - до полного размера (16 или 32 бита)
 S=1  - байт

 REG  - определяет регистр общего назначения 8/16/32 бита
 MODE - определяет режим адресации вместе с REG/MEM
 REG/MEM - второй операнд - регистр 8/16/32 или память

 Mode    │   00    │      01      │  10   │    11
 REG/MEM │     │          │       │
 ────────┼─────────┼──────────────┼───────────────┼──────────
 000     │ [BX+SI] │ [BX+SI]+imm8 │ [BX+SI]+imm16 │ EAX/AX/AL
 001     │ [BX+DI] │ [BX+DI]+imm8 │ [BX+DI]+imm16 │ ECX/CX/CL
 010     │ [BP+SI] │ [BP+SI]+imm8 │ [BP+SI]+imm16 │ EDX/DX/DL
 011     │ [BP+DI] │ [BP+DI]+imm8 │ [BP+DI]+imm16 │ EBX/BX/BL
 100     │ [SI]    │ [SI]+imm8    │ [SI]+imm16    │ ESP/SP/AH
 101     │ [DI]    │ [DI]+imm8    │ [DI]+imm16    │ EBP/BP/CH
 110     │ [imm16] │ [BP]+imm8    │ [BP]+imm16    │ ESI/SI/DH
 111     │ [BX]    │ [BX]+imm8    │ [BX]+imm16    │ EDI/DI/BH


 SREG - сегментный регистр 000 - ES
               001 - CS
               010 - SS
               011 - DS
               100 - FS
               101 - GS

 НОП - непосредственный операнд

</span></div></body>
</html>
